<app-header></app-header>

<div class="block-main">
  <div class="row">
    <div class="col-22pr px-def">
      <div class="container-def block-side-panel overflow-hidden">
        <div class="p-3">
          <img [src]="userProfileInfo.avatarUrl" class="icon">
        </div>
        <div class="text-center">
          <span>{{userProfileInfo.firstName}} {{userProfileInfo.lastName}}</span>
        </div>
        <hr class="hr-def">
        <div *ngIf="!myProfile" class="pb-3 px-3">
          <input type="submit" class="w-100 inp-def-form btn-def" value="Повідомлення">
          <div *ngIf="!userProfileInfo.friend" class="pt-2">
            <div *ngIf="!userProfileInfo.requestToFriends; else sendRequestToFriends">
              <input type="submit" class="w-100 inp-def-form btn-def" value="Долучити до друзів">
            </div>
            <ng-template #sendRequestToFriends>
              <input type="submit" class="w-100 inp-def-form btn-used" value="Запит надіслано">
            </ng-template>
          </div>
        </div>
        <div class="block-info px-3">
          <div class="pb-1">
            <span *ngIf="userProfileInfo.aboutYourself">Про себе: <span class="info-label">{{userProfileInfo.aboutYourself}}</span></span>
          </div>
          <div class="pb-1">
            <span *ngIf="userProfileInfo.dateOfBirth">Вік: <span class="info-label">{{calcAge()}}</span></span>
          </div>
          <div class="pb-1">
            <span *ngIf="userProfileInfo.city">Місто: <span class="info-label">{{userProfileInfo.city}}</span></span>
          </div>
        </div>
        <div class="block-info px-3" *ngIf="showAdditionalInfo">
          <hr class="hr-def">
          <div class="pb-1">
            <span *ngIf="userProfileInfo.dateOfBirth">Дата народження: <span class="info-label">{{userProfileInfo.dateOfBirth | date: 'dd.MM.yyyy'}}</span></span>
          </div>
          <div class="pb-1">
            <span *ngIf="userProfileInfo.school">Школа: <span class="info-label">{{userProfileInfo.school}}</span></span>
          </div>
          <div class="pb-1">
            <span *ngIf="userProfileInfo.university">Університет: <span class="info-label">{{userProfileInfo.university}}</span></span>
          </div>
        </div>
        <div class="text-center">
          <button type="button" class="inp-def-form btn-hidden btn-info-cst" (click)="toggleShowAdditionalInfo()">
            <span
              class="material-icons align-middle">{{showAdditionalInfo ? 'keyboard_double_arrow_up' : 'keyboard_double_arrow_down' }}</span>
          </button>
        </div>
      </div>
    </div>
    <div class="col-56pr px-def">
      <div class="container-def p-3 mb-3">
        <div>
          <div class="row">
            <div class="col">
              <p class="mb-0">Фотографії <span
                class="text-gray-1">{{(userProfileInfo.userPhotoList) ? userProfileInfo.userPhotoList.length : 0}}</span>
              </p>
            </div>
            <div class="col">
              <div *ngIf="myProfile">
                <input type="file" #photoFile class="d-none" accept="image/gif, image/jpeg, image/png"
                       (change)="addPhoto($event.target)">
                <button class="inp-small-form btn-hidden float-end" type="button" (click)="photoFile.click()">
                  <span class="material-icons align-middle">add</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="images-list">
          <div class="image-item mt-2" *ngFor="let photo of userProfileInfo.userPhotoList">
            <input type="image" [src]="photo.photoUrl" class="image" (click)="viewPhoto(photo)">
            <div *ngIf="myProfile">
              <button class="btn-on-photo" type="button" (click)="deletePhoto(photo.id)">
                <span class="material-icons align-middle">clear</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="container-def p-3 mb-3">
        <div class="row">
          <div class="col">
            <span class="mb-0">Пости <span
              class="text-gray-1">{{(userProfileInfo.userPostList) ? userProfileInfo.userPostList.length : 0}}</span></span>
          </div>
          <div class="col">
            <div *ngIf="myProfile">
              <button class="inp-small-form btn-hidden float-end" type="button" (click)="createPost()">
                <span class="material-icons align-middle">add</span>
              </button>
            </div>
            <button class="inp-small-form btn-hidden float-end" type="button" (click)="toggleShowPosts()">
              <span class="material-icons align-middle">{{showPosts ? 'visibility_off' : 'visibility' }}</span>
            </button>
          </div>
        </div>
      </div>
      <div *ngIf="showPosts">
        <div class="container-def p-3 mb-3" *ngFor="let post of userProfileInfo.userPostList">
          <div class="post-image-item mb-2">
            <div class="text-center">
              <input type="image" [src]="post.photoUrl" class="image-post" (click)="viewPostPhoto(post)">
            </div>
            <div *ngIf="myProfile">
              <button class="btn-on-post" type="button" (click)="deletePost(post.id)">
                <span class="material-icons align-middle">clear</span>
              </button>
            </div>
          </div>
          <div class="px-2">
            <span>{{post.text}}</span>
          </div>
          <div>
            <hr class="hr-def mt-2">
          </div>
          <div>
            <div class="row">
              <div class="col">
                <span class="ms-2">{{post.creationTime | date: 'dd.MM.yyyy'}}</span>
              </div>
              <div class="col">
                <button class="inp-small-form btn-hidden float-end me-2" type="button">
                  <span class="material-icons align-middle text-red-1">favorite</span>
                  <span class="ms-1">{{post.numOfLikes}}</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-22pr px-def">
      <div class="block-side-panel">
        <div class="mb-3">
          <app-menu></app-menu>
        </div>
        <div class="container-def p-3">
          <div>
            <a [routerLink]="['/friends']" class="text-decoration-none text-black mb-0">Друзі <span class="text-gray-1">{{(userProfileInfo.userFriendList) ? userProfileInfo.userFriendList.length : 0}}</span></a>
          </div>
          <div *ngIf="userProfileInfo.userFriendList" class="pt-3">
            <div class="row">
              <div *ngFor="let friend of userProfileInfo.userFriendList" class="icon-small-box">
                <a href="#" class="link-def">
                  <div>
                    <img [src]="friend.avatarUrl" class="icon-small">
                  </div>
                  <div class="text-center">
                    <p class="form-label">{{friend.firstName}}</p>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
